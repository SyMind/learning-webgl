(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{8256:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blur",function(){return c(9498)}])},9498:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSG":function(){return k}});var d=c(5893),e=c(7294),f=c(6087),g=c(9555);function h(a,b,c){var d=a.createShader(b);return(a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS))?d:(alert("An error occurred compiling the shaders: "+a.getShaderInfoLog(d)),a.deleteShader(d),null)}function i(a){return(a&a-1)==0}var j=function(){var a=(0,e.useRef)(0),b=(0,e.useRef)(null);return(0,e.useEffect)(function(){if(b.current){var c=b.current.getContext("webgl");if(!c){alert("无法初始化 WebGL，你的浏览器、操作系统或硬件等可能不支持 WebGL。");return}var d,e,g,j,k,l,m,n,o=(e="cubetexture.png",g=(d=c).createTexture(),d.bindTexture(d.TEXTURE_2D,g),j=d.RGBA,k=d.RGBA,l=d.UNSIGNED_BYTE,m=new Uint8Array([0,0,255,255]),d.texImage2D(d.TEXTURE_2D,0,j,1,1,0,k,l,m),n=new Image,n.onload=function(){d.bindTexture(d.TEXTURE_2D,g),d.texImage2D(d.TEXTURE_2D,0,j,k,l,n),i(n.width)&&i(n.height)?d.generateMipmap(d.TEXTURE_2D):(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR))},n.src=e,g);requestAnimationFrame(p)}function p(){(function(a,b,c){var d=function(a,b,c){var d=h(a,a.VERTEX_SHADER,b);if(!d)return null;var e=h(a,a.FRAGMENT_SHADER,c);if(!e)return null;var f=a.createProgram();return f?(a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),a.getProgramParameter(f,a.LINK_STATUS))?f:(alert("Unable to initialize the shader program: "+a.getProgramInfoLog(f)),null):null}(a,"\n    attribute vec4 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying highp vec2 vTextureCoord;\n\n    void main() {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vTextureCoord = aTextureCoord;\n    }\n","\n    precision highp float;\n\n    varying highp vec2 vTextureCoord;\n\n    uniform float tex_offset;\n\n    uniform sampler2D uSampler;\n\n    void main() {\n        vec4 orColor = texture2D(uSampler, vTextureCoord);\n        const float PI = 3.1415926535897932384626433832795;\n        // const float tex_offset = 0.01;\n        const float degree = 1.0;\n        float w = 1.0 / degree;\n        float temWeight[3];\n        temWeight[0] = (1.0 / (2.0 * PI * w * w));\n        temWeight[1] = (1.0/(2.0 * PI * w * w)) * exp(-1.0 * w * w);\n        temWeight[2] = (1.0/(2.0 * PI * w * w)) * exp(-2.0 * w * w);\n        float total = temWeight[0] + temWeight[1] * 4.0 + temWeight[2] * 4.0;\n        float orAlpha=orColor.a;\n        float weight[3];\n        weight[0] = temWeight[0] / total;\n        weight[1] = temWeight[1] / total;\n        weight[2] = temWeight[2] / total;\n        vec4 color = texture2D(uSampler, vTextureCoord + tex_offset * vec2(0, 0)) * weight[0]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(0, -1)) * weight[1]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(1, 0)) * weight[1]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(-1, 0)) * weight[1]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(1, 0)) * weight[1] \n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(1, 1)) * weight[2]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(-1, 1)) * weight[2]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(1, -1)) * weight[2]\n            + texture2D(uSampler, vTextureCoord + tex_offset * vec2(-1, -1)) * weight[2];\n        gl_FragColor = vec4(color.rgb, orAlpha);\n    }\n");if(d){var e=a.getAttribLocation(d,"aVertexPosition"),g=a.getUniformLocation(d,"uProjectionMatrix"),i=a.getUniformLocation(d,"uModelViewMatrix"),j=a.getUniformLocation(d,"tex_offset");a.clearColor(0,0,0,1),a.clearDepth(1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);var k=a.canvas.clientWidth/a.canvas.clientHeight,l=f.Ue();f.G3(l,45*Math.PI/180,k,.1,100);var m,n,o,p=f.Ue();f.Iu(p,p,[-0,0,-6]);var q=(n=(m=a).createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,n),m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1,]),m.STATIC_DRAW),o=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,o),m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0,]),m.STATIC_DRAW),{position:n,textureCoord:o});a.bindBuffer(a.ARRAY_BUFFER,q.position),a.vertexAttribPointer(e,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(e);var r=a.getAttribLocation(d,"aTextureCoord");a.bindBuffer(a.ARRAY_BUFFER,q.textureCoord),a.vertexAttribPointer(r,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(r),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,b);var s=a.getUniformLocation(d,"uSampler");a.uniform1i(s,0),a.useProgram(d),a.uniformMatrix4fv(g,!1,l),a.uniformMatrix4fv(i,!1,p),a.uniform1f(j,c),a.drawArrays(a.TRIANGLE_STRIP,0,4)}})(c,o,a.current/100),requestAnimationFrame(p)}},[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("canvas",{ref:b,width:"640",height:"480",children:["你的浏览器似乎不支持或者禁用了 HTML5 ",(0,d.jsx)("code",{children:"<canvas>"})," 元素。"]}),(0,d.jsx)(g.Z,{onChange:function(b){return a.current=b}})]})},k=!0;b.default=j}},function(a){a.O(0,[911,774,888,179],function(){var b;return a(a.s=8256)}),_N_E=a.O()}])